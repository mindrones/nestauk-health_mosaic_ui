<script>
  import { getContext } from 'svelte';
  import { stores } from '@sapper/app';

  import { screenStore, currentTab } from '../../stores/search.ts';

  import { SEARCH } from './_layout.html';
  import { volume_geo } from './facets';

  const facets = {volume_geo};
  const { checkDirty, transitionComplete } = getContext(SEARCH);
  const { page } = stores();

  $: isDirty = $screenStore && checkDirty();
  $: $page && transitionComplete();
</script>

<svelte:component
  this={facets[$page.params.facet]}
  {isDirty}
/>
